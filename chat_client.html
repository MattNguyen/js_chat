<!DOCTYPE html>

<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://codeclasschat.herokuapp.com/helpers.js">
  </script>

  <script type="text/javascript" charset="utf-8">
    $(document).ready = function() {
      setInterval(function() {
        helpers.fetchNewMessages(function(messages) {
          for(index in messages) {
            helpers.renderMessage(messages[index]);
          }
        });
      }, 1000);
    }();

    $(document).on("keypress", "#input_message", function(e) {
      var message = $("#input_message").val();
      if(e.keyCode == 13) {
        e.preventDefault();
        helpers.sendMessage(message);
        $("#input_message").val('');
      }
    });

  </script>
</head>

<body>
  <textarea id="input_message"></textarea>
  <%= yield %>
</body>

</html>